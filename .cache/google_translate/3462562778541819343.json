The plan was kept secret until the last minute.